spring.application.name=mdexo-backend

spring.mvc.pathmatch.matching-strategy=ant-path-matcher

# GENERAL
spring.web.locale=de_DE
spring.web.locale-resolver=fixed

# DATABASE
spring.datasource.url=${DB_URL}  # Use environment variable for database URL
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.datasource.tomcat.max-wait=5000
spring.datasource.tomcat.max-active=50
spring.datasource.tomcat.min-idle=10

spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true 
spring.jpa.show-sql=false

# Hikari Connection Pool Configuration
spring.datasource.hikari.pool-name=HikariPool
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=600000

# Redis Configuration
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT}
spring.data.redis.password=${REDIS_PASSWORD}
spring.data.redis.ssl.enabled=false
spring.data.redis.timeout=10s

# Cache Configuration
spring.cache.type=none

# Hibernate and logging
# You might want to lower the logging level for production
logging.level.org.springframework.security=DEBUG

# RESEND Configuration (API-based, no SMTP needed)
resend.api-key=${RESEND_API_KEY}

# Custom Email Settings
app.email.enabled=true
app.email.from-address=${EMAIL_FROM_ADDRESS:noreply@iterials.com}
app.email.admin-email=${EMAIL_ADMIN:admin@iterials.com}
app.email.support-email=${EMAIL_SUPPORT:support@iterials.com}

# Thymeleaf Configuration
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.check-template-location=true
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
# Enable cache in production for better performance
spring.thymeleaf.cache=true
# Disable Thymeleaf for certain paths
spring.thymeleaf.excluded-view-names=*.html,*.ico,*.js,*.css,*.json,*.map,*.txt,*.xml

# Static resources
spring.web.resources.static-locations=classpath:/static/
spring.web.resources.add-mappings=true
spring.web.resources.cache.period=3600

# Server Configuration
# Ensure the port is correctly set (8080 is common for production)
server.port=8080

# PROFILE
spring.profiles.active=dev

# UPLOAD
app.s3.folder=real-estates
app.upload.max-size=52428800
app.upload.allowed-mime-types=image/jpeg,image/png
app.upload.allowed-extensions=jpg,jpeg,png

# S3 Orphan Cleanup Configuration
app.s3.cleanup.enabled=true
app.s3.cleanup.dry-run=true  # Start with dry-run for safety. Will only log what would be deleted (no actual deletion)

# CloudFront CDN Configuration
aws.cloudfront.domain=https://d6oif2udj7x1l.cloudfront.net
aws.cloudfront.enabled=true

# Scheduled task configuration
spring.task.scheduling.pool.size=2

spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
server.tomcat.max-swallow-size=50MB

cors.allowed-origins=https://dwellia.rs,https://www.dwellia.rs,https://api.dwellia.rs,http://localhost:5173,http://localhost:3000